name: Sync All Public Images

on:
  workflow_dispatch:

jobs:
  push-ghcr:
    runs-on: ubuntu-latest
    steps:
      - name: Log in to GHCR
        run: echo "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" | docker login ghcr.io -u flyhare-coder --password-stdin

      - name: Sync Master List
        run: |
          declare -A images=(
            # --- è§†é¢‘ä¸Žå·¥å…·ç»„ ---
            ["xhofe/alist:latest"]="my-alist"
            ["imputnet/cobalt:latest"]="my-cobalt"
            ["alexta69/metube:latest"]="my-metube"
            ["sevenyc/video-decode:latest"]="my-vapi"
            
            # --- ä¼ä¸šä¸ŽåŠžå…¬ç»„ ---
            ["akaunting/akaunting:latest"]="my-akaunting"
            ["dolibarr/dolibarr:latest"]="my-dolibarr"
            ["espocrm/espocrm:latest"]="my-espocrm"
            ["odoo:latest"]="my-odoo"
            ["snipe/snipe-it:latest"]="my-snipeit"
            ["docuseal/docuseal:latest"]="my-docuseal"
            ["onlyoffice/documentserver:latest"]="my-onlyoffice"
            
            # --- ç¬”è®°ä¸Žé¡¹ç›®ç®¡ç†ç»„ ---
            ["blinko-space/blinko:latest"]="my-blinko"
            ["leantime/leantime:latest"]="my-leantime"
            ["n8nio/n8n:latest"]="my-n8n"
            ["metabase/metabase:latest"]="my-metabase"
            ["chatwoot/chatwoot:latest"]="my-chatwoot"
            
            # --- ç³»ç»Ÿä¸Žç›‘æŽ§ç»„ ---
            ["dgtlmoon/changedetection.io:latest"]="my-changedetection"
            ["crowdsecurity/crowdsec:latest"]="my-crowdsec"
            ["amir20/dozzle:latest"]="my-dozzle"
            ["grafana/grafana:latest"]="my-grafana"
            ["louislam/uptime-kuma:latest"]="my-uptime-kuma"
            ["debian:latest"]="my-debian"
            
            # --- å­˜å‚¨ä¸Žç½‘ç»œç»„ ---
            ["filebrowser/filebrowser:latest"]="my-filebrowser"
            ["nextcloud:latest"]="my-nextcloud"
            ["kalcaddle/kodbox:latest"]="my-kodbox"
            ["binwiederhier/ntfy:latest"]="my-ntfy"
            ["vaultwarden/server:latest"]="my-vaultwarden"
            ["docker-mailserver/docker-mailserver:latest"]="my-mailserver"
            
            # --- å…¶ä»–ç¥žå™¨ ---
            ["smeas/duplicacy:latest"]="my-duplicacy"
            ["linuxserver/heimdall:latest"]="my-heimdall"
            ["libretranslate/libretranslate:latest"]="my-libretranslate"
            ["matomo:latest"]="my-matomo"
            ["mautic/mautic:latest"]="my-mautic"
            ["froodle/s-pdf:latest"]="my-stirling-pdf"
            ["bellis/wallos:latest"]="my-wallos"
          )

          for src in "${!images[@]}"; do
            dst=${images[$src]}
            echo "ðŸ”¥ 3sç”·äººé€Ÿåº¦åŒæ­¥ä¸­: $src -> $dst"
            docker pull $src
            docker tag $src ghcr.io/flyhare-coder/$dst:latest
            docker push ghcr.io/flyhare-coder/$dst:latest
          done
